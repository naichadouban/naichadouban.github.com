---
title: 深入理解base64
date: 2019-02-20T13:30:00
tags: ["base64","base58"]
categories: ["computer","base编码"]
---

# base64
## base64简单介绍
base64是一种可逆的编码方式。
> 简单来说，base64一种用64个Ascii字符来表示任意二进制数据的方法，就是表示二进制数据，用自己设定的64个字符。主要用于将不可打印的字符转化成可打印的字符。
或者简单的说将二进制数据编码成Ascii字符。Base64是网络上最常用的传输8bit字节数据的编码方式之一

## base64表
  Base64的原理其实很简单，首先，需要准备一个包含64个字符的表格（如下表），0～63分别对应了唯一一个字符，比如18对应的是S。
![](https://upload-images.jianshu.io/upload_images/422094-2f97583c4c8cda01.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## base64编码过程
对二进制数据进行处理，每3个字节一组，一共3x8=24bit，将这24bit划分为4组，每组正好6个bit，6bit的数据刚好可以表示0～63的范围，也就可以对应上表的64个字符。这样我们就得到了4个数字作为索引，然后查表获得相应的4个字符，就得到了编码后的字符串。

比如现在要编码`Man`三个字符，我们需要先根据ascii编码转化成二进制数据，然后再对照`base64`编码，将二进制数据映射到base64字符上
![image.png](https://upload-images.jianshu.io/upload_images/422094-a807f9a4a0d9132f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
## base64后面为什么会有等号(=)?
Base64编码会把3字节的二进制数据编码为4字节的文本数据，长度增加为原来的4/3。如果要编码的二进制数据不是3的倍数，最后会剩下1个或2个字节怎么办？
此时，需在原数据后面添加1个或2个零值字节，使其字节数是3的倍数。然后，在编码后的字符串后面添加1个或2个等号“=”，表示所添加的零值字节数。解码的时候，会自动去掉.
## base64优缺点
优点：可以将二进制数据转换成可打印字符，方便传输数据；对数据进行简单的加密，肉眼安全。
缺点：内容编码后的体积会变大，编码和解码需要额外的工作量。
> 它的使用场景有很多，比如将图片等资源文件以Base64编码形式直接放于代码中，使用的时候反Base64后转换成Image对象使用；有些文本协议不支持不可见字符的传递，只能转换成可见字符来传递信息。有时在一些特殊的场合，大多数消息是纯文本的，偶尔需要用这条纯文本通道传一张图片之类的情况发生的时候，就会用到Base64，比如多功能Internet 邮件扩充服务（MIME）就是用Base64对邮件的附件进行编码的。
# base58
## base58介绍
和通常base64编码一样，base58编码的作用也是将非可视字符可视化（ASCII化）
## 和base64的区别
不同的是base58编码去掉了几个看起来会产生歧义的字符，如 0 (零), O (大写字母O), I (大写的字母i) and l (小写的字母L) ，和几个影响双击选择的字符，如/, +。结果字符集正好58个字符(包括9个数字，24个大写字母，25个小写字母)

而且因为58 不是2的整次幂，所以没有使用类似base64编码中使用直接截取3个字符转4个字符（3*8=4*6 , 2的6次方刚好64）的方法进行转换，而是采用我们数学上经常使用的进制转换方法——辗转相除法（本质上，base64编码是64进制，base58是58进制）
## base58表
![](https://upload-images.jianshu.io/upload_images/422094-6c30172aa992818a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
也就是字符1代表0，字符2代表1,字符3代表2...字符z代表57。然后回一下辗转相除法。

如要将1234转换为58进制；

第一步：1234除于58，商21，余数为16，查表得H

第二步：21除于58，商0，余数为21，查表得N

所以得到base58编码为：NH

# 提示
写代码时，可以直接跳入到`base64`和`base58`的`Encode()`和`Decode()`代码中看源码实现。

