---
title: "golang临时记录"
date: 2019-06-03T01:37:56+08:00
tags: ["golang"]
categories: ["golang","未整理"]

---

# 原子操作

原子操作就是指不会被**线程调度**机制打断的操作。这种操作一旦开始，就一直运行到结束，中间不会有任何`context switch`(切换到下一个线程)。

原子操作在进行的过程中是不允许中断的，在底层，这会由CPU提供芯片级别的支持，所以绝对有效。

即使在拥有多个CPU的计算机系统中，原子操作的保证也是不可撼动的。在众多的的同步工具中，真正能保证原子性执行的只有原子操作。

> 互斥锁可以保证临界区中代码的串行执行，但却不能保证这些代码执行的原子性。

## 优点
1. 原子操作可以完全消除竞态条件，并能够绝对地保证并发安全性。
2. 执行速度要比其他同步工具块很多，通常会高出好几个数量级。能用原子操作就别用锁。

## 缺点
1. 如果大量的原子操作迟迟不能完成，而它又不会被中断，对整个系统将是灾难。

## 结果
因为原子操作不能被中断，所以它需要足够简单，并且要求快速。所以在`sync.atomic`包下，大家看到的都是一些非常简单的操作。

# binary包

binary 包，简单的实现了数字和byte之间的转化；varints之间的编码和解码。简单说一下，varints是一种使用一个或多个字节表示整型数据的方法。其中数值本身越小，其所占用的字节数越少。